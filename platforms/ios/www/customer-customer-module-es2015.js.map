{"version":3,"sources":["./src/app/customer/cartmodal/cartmodal.component.html","./src/app/customer/customer.page.html","./src/app/customer/cartmodal/cartmodal.component.scss","./src/app/customer/cartmodal/cartmodal.component.ts","./src/app/customer/customer.module.ts","./src/app/customer/customer.page.scss","./src/app/customer/customer.page.ts","./src/app/customer/shared/user.service.ts","./src/app/shared/services/loading.service.ts"],"names":[],"mappings":"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","file":"customer-customer-module-es2015.js","sourcesContent":["module.exports = \"<ion-header padding=\\\"true\\\">\\n  <ion-toolbar  *ngIf=\\\"store\\\">\\n\\n    <ion-avatar slot=\\\"start\\\">\\n      <img *ngIf=\\\"store.store_pic\\\" [src]=\\\"'https://qrdee.co/app/'+store.store_pic\\\">\\n      <img *ngIf=\\\"!store.store_pic\\\" src=\\\"/assets/noimg.png\\\">\\n    </ion-avatar>\\n\\n    <ion-title  >\\n      {{ store.store_name }}\\n      <!-- <img  object-fit: cover src=\\\"/assets/noimg.png\\\" > -->\\n    </ion-title>\\n\\n\\n    <ion-button fill=\\\"clear\\\" color=\\\"danger\\\" slot=\\\"end\\\" (click)=\\\"forceDissmiss(0);\\\">\\n      <ion-icon name=\\\"ios-arrow-back\\\"></ion-icon>Back\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n\\n\\n\\n  <ion-list *ngIf=\\\"products\\\">\\n      <ion-item >\\n\\n        <ion-text slot=\\\"start\\\">\\n          <small>เลือกไว้แล้ว {{pick_count}} ชิ้น</small>\\n        </ion-text>\\n        <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" slot=\\\"end\\\" (click)=\\\"startPayment();\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-cash\\\"></ion-icon> ชำระเงิน\\n        </ion-button>\\n      </ion-item>\\n\\n      <ion-item  *ngFor=\\\"let product of products\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <img *ngIf=\\\"store.store_pic\\\" [src]=\\\"'https://qrdee.co/app/'+store.store_pic\\\">\\n          <img *ngIf=\\\"!store.store_pic\\\" src=\\\"/assets/noimg.png\\\">\\n        </ion-avatar>\\n        <ion-text>\\n          <small *ngIf=\\\"product.product_th\\\"><b>{{product.product_th}}</b></small><br>\\n        </ion-text>\\n        <ion-text slot=\\\"end\\\">\\n          <small *ngIf=\\\"product.price\\\">ราคา {{product.price | number }} บาท</small><br>\\n        </ion-text>\\n        <ion-button fill=\\\"clear\\\" color=\\\"secondary\\\" slot=\\\"end\\\" (click)=\\\"selectItem(product);\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-cart\\\"></ion-icon>\\n        </ion-button>\\n      </ion-item>\\n\\n      <ion-item >\\n        <ion-text>\\n          <small *ngIf=\\\"store.delivery_price\\\">**ร้านนี้ค่าส่ง {{store.delivery_price}} บาท</small><br>\\n        </ion-text>\\n      </ion-item>\\n\\n  </ion-list>\\n\\n\\n\\n</ion-content>\\n\"","module.exports = \"<ion-header style=\\\"background:#FFFFFF;\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>ซื้อสินค้า</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [hidden]=\\\"tab1\\\" style=\\\"background:#FFFFFF;\\\">\\n  <ion-searchbar placeholder=\\\"ค้นหาร้าน\\\" color=\\\"primary\\\" (ionChange)=\\\"searchStores($event.target.value)\\\">\\n  </ion-searchbar>\\n\\n  <ion-list *ngIf=\\\"stores\\\">\\n      <ion-list-header >\\n        <ion-label>ร้านค้าไกล้เคียง</ion-label>\\n      </ion-list-header>\\n\\n      <ion-item  *ngFor=\\\"let store of stores\\\">\\n          <ion-avatar slot=\\\"start\\\">\\n            <img *ngIf=\\\"store.store_pic\\\" [src]=\\\"'https://qrdee.co/app/'+store.store_pic\\\">\\n            <img *ngIf=\\\"!store.store_pic\\\" src=\\\"/assets/noimg.png\\\">\\n          </ion-avatar>\\n          <ion-text>\\n            <small *ngIf=\\\"store.store_name\\\"><b>{{store.store_name}}</b></small><br>\\n            <small *ngIf=\\\"store.store_type\\\">{{store.store_type.store_type_th}}</small>\\n          </ion-text>\\n          <ion-text slot=\\\"end\\\">\\n            <small *ngIf=\\\"store.delivery_price\\\">ระยะ {{store.distance | number }} km</small><br>\\n            <small *ngIf=\\\"store.delivery_price\\\">ค่าส่ง {{store.delivery_price}} ฿</small>\\n          </ion-text>\\n          <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" slot=\\\"end\\\" (click)=\\\"viewStore(store);\\\">\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"md-eye\\\"></ion-icon>\\n          </ion-button>\\n        </ion-item>\\n  </ion-list>\\n\\n  <!-- <ion-infinite-scroll threshold=\\\"50%\\\" (ionInfinite)=\\\"infinitStores($event.target)\\\">\\n     <ion-infinite-scroll-content>\\n     </ion-infinite-scroll-content>\\n   </ion-infinite-scroll> -->\\n\\n</ion-content>\\n<ion-content [hidden]=\\\"tab2\\\">\\n\\n  <ion-list  *ngFor=\\\"let cart of member_cart\\\">\\n\\n      <!-- <ion-list-header >\\n        <ion-label>ตะกร้าสินค้า</ion-label>\\n      </ion-list-header> -->\\n      <ion-item >\\n        <ion-avatar slot=\\\"start\\\">\\n          <img *ngIf=\\\"cart.store_pic\\\" [src]=\\\"'https://qrdee.co/app/'+store.store_pic\\\">\\n          <img *ngIf=\\\"!cart.store_pic\\\" src=\\\"/assets/noimg.png\\\">\\n        </ion-avatar>\\n        <ion-text>\\n          <small *ngIf=\\\"cart.store_name\\\"><b>ร้าน {{cart.store_name}}</b></small><br>\\n        </ion-text>\\n        <ion-text slot=\\\"end\\\">\\n          <small *ngIf=\\\"cart.delivery_price\\\">ค่าส่ง {{cart.delivery_price}} ฿</small>\\n        </ion-text>\\n        <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" slot=\\\"end\\\" (click)=\\\"callStore(cart.mobile_number);\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-call\\\"></ion-icon>\\n        </ion-button>\\n      </ion-item>\\n\\n      <ion-item *ngFor=\\\"let prod of cart.products\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <img *ngIf=\\\"prod.thumbnail\\\" [src]=\\\"'https://qrdee.co/app/'+prod.thumbnail\\\">\\n          <img *ngIf=\\\"!prod.thumbnail\\\" src=\\\"/assets/noimg.png\\\">\\n        </ion-avatar>\\n        <ion-text>\\n          <small *ngIf=\\\"prod.product_th\\\"><b>{{prod.product_th}}</b></small><br>\\n        </ion-text>\\n        <ion-text slot=\\\"end\\\">\\n          <small *ngIf=\\\"prod.price\\\">{{prod.price}} ฿</small>\\n        </ion-text>\\n        <ion-button fill=\\\"clear\\\" color=\\\"danger\\\" slot=\\\"end\\\" (click)=\\\"removeItem(cart.id, prod.id);\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"md-remove-circle\\\"></ion-icon>\\n        </ion-button>\\n      </ion-item>\\n\\n  </ion-list>\\n\\n  <ion-list lines=\\\"none\\\">\\n    <ion-item>\\n      <ion-text slot=\\\"start\\\">\\n        <b *ngIf=\\\"total_price\\\">รวม {{total_price}} ฿</b>\\n      </ion-text>\\n      <ion-text slot=\\\"end\\\">\\n        <small>**ชำระเงินปลายทางผ่าน QRCode</small>\\n      </ion-text>\\n    </ion-item>\\n  </ion-list>\\n\\n  <ion-label position=\\\"floating\\\">โปรดระบุจุดรับสินค้า</ion-label>\\n  <div #mapElement style=\\\"height:250px;\\\" ></div>\\n  <br>\\n\\n\\n  <ion-list lines=\\\"none\\\">\\n\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">ชื่อผู้รับ</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"member.firstname\\\" style=\\\"background-color:#ded9d9;\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">เบอร์โทรศัพท์</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"member.mobile_number\\\" style=\\\"background-color:#ded9d9;\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">รายละเอียดเพิ่มเติมสำหรับผู้ส่งของ</ion-label>\\n      <ion-textarea [(ngModel)]=\\\"notes\\\" style=\\\"background-color:#ded9d9;\\\" rows=\\\"4\\\" placeholder=\\\"ตัวอย่าง. หน้าอาคาร 3 สาขาวิทยาการคอมพิวเตอร์ มหาวิทยาลัยราชภัฏสุรินทร์\\\"></ion-textarea>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-button size=\\\"default\\\" slot=\\\"end\\\" (click)=\\\"placeOrder();\\\" color=\\\"tertiary\\\">\\n        ส่งคำสั่งซื้อ\\n      </ion-button>\\n    </ion-item>\\n  </ion-list>\\n\\n</ion-content>\\n\\n<ion-footer style=\\\"background:#FFFFFF;\\\">\\n  <ion-toolbar>\\n          <ion-tabs>\\n              <ion-tab-bar slot=\\\"bottom\\\">\\n                <ion-tab-button color=\\\"primary\\\" (click)=\\\"changeTab(0)\\\" >\\n                    <ion-icon name=\\\"md-locate\\\"></ion-icon>\\n                    <ion-label>ร้านค้าไกล้ๆ</ion-label>\\n                </ion-tab-button>\\n                <ion-tab-button color=\\\"primary\\\" (click)=\\\"changeTab(1)\\\" >\\n                    <ion-icon name=\\\"md-cart\\\"></ion-icon>\\n                    <ion-label>รายการซื้อ</ion-label>\\n                </ion-tab-button>\\n              </ion-tab-bar>\\n            </ion-tabs>\\n   </ion-toolbar>\\n</ion-footer>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2N1c3RvbWVyL2NhcnRtb2RhbC9jYXJ0bW9kYWwuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ProductService } from '../../products/shared/product.service';\nimport { ToastService } from '../../shared/services/toast.service';\n\n\n@Component({\n  selector: 'app-cartmodal',\n  templateUrl: './cartmodal.component.html',\n  styleUrls: ['./cartmodal.component.scss'],\n})\nexport class CartmodalComponent implements OnInit {\n\n  @Input() store;\n  products:any[] = [];\n  member_cart:any[] = [];\n  pick_count:number = 0;\n\n  constructor(\n    private productService: ProductService,\n    private toastService: ToastService,\n    private modalController: ModalController\n  ) {\n    console.log(this.store);\n    this.member_cart =  JSON.parse(localStorage.getItem('member_cart'));\n    this.calcPickCount();\n   }\n\n  ngOnInit() {\n    //console.log(this.store);\n  }\n\n  ngAfterViewInit(): void {\n    this.loadProducts();\n  }\n  selectItem(product){\n      let store = null;\n      this.member_cart.forEach(e => {\n        if(e.id == this.store.id){\n          store = e;\n        }\n      });\n      if(store){\n        store.products.push(product);\n      }else{\n        store = this.store;\n        store.products = [product];\n        this.member_cart.push(this.store);\n      }\n      console.log(this.member_cart);\n      localStorage.setItem('member_cart',JSON.stringify(this.member_cart));\n      this.toastService.showToast('เก็บสินค้าลงตะกร้าแล้ว', 'top');\n      this.calcPickCount();\n  }\n\n  calcPickCount(){\n    this.pick_count = 0;\n    this.member_cart.forEach(e => {\n      this.pick_count += e.products.length;\n    });\n  }\n\n  loadProducts(){\n    //https://qrdee.co/api/v2/products/294\n    this.productService.getProducts(this.store.id).subscribe((data:any)=>{\n      console.log(data);\n      this.products = data;\n      //console.log(this.member_cart);\n    });\n\n  }\n  startPayment(){\n    // process &\n    this.closeModal(3);\n  }\n\n\n  forceDissmiss(val){\n    this.closeModal(val);\n  }\n\n  async closeModal(status) {\n    await this.modalController.dismiss(status);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { SharedModule } from '../shared/shared.module';\nimport { CustomerPage } from './customer.page';\nimport { UserService } from './shared/user.service';\nimport { FormsService } from '../products/shared/forms.service';\nimport { CartmodalComponent } from './cartmodal/cartmodal.component';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CustomerPage\n  },\n   {\n    path: 'cartmodal',\n    component: CartmodalComponent\n  }\n  // ,\n  //  {\n  //   path: ':id',\n  //       component: CustomerPage,\n  //       data: { title: 'แก้ไขข้อมูล', formType: 'update' }\n  // },\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [\n    CustomerPage,\n    CartmodalComponent\n  ],\n   providers: [UserService,FormsService,CallNumber],\n})\nexport class CustomerPageModule {}\n","module.exports = \".btn1 {\\n  height: 100px;\\n  --background: #33FFCC ; }\\n\\n.btn2 {\\n  height: 100px;\\n  --background: #66CCFF ; }\\n\\n.img_store {\\n  width: 80px;\\n  height: 80px; }\\n\\n.bk {\\n  width: 100px;\\n  height: 60px;\\n  position: absolute;\\n  top: 65%;\\n  left: 65%;\\n  margin-top: -100px;\\n  margin-left: -100px; }\\n\\n.bg {\\n  --background: url('https://image.freepik.com/free-vector/city-background-design_1300-380.jpg'); }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90aG9uZ2NoYWkvUHJvamVjdHMvcXJkZWUvc3JjL2FwcC9jdXN0b21lci9jdXN0b21lci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxhQUFhO0VBQ2Isc0JBQWEsRUFBQTs7QUFHZDtFQUNDLGFBQWE7RUFDYixzQkFBYSxFQUFBOztBQUdkO0VBQ0MsV0FBVztFQUFFLFlBQVksRUFBQTs7QUFFMUI7RUFDQyxZQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsU0FBUTtFQUNSLGtCQUFrQjtFQUNsQixtQkFBbUIsRUFBQTs7QUFHcEI7RUFDRSw4RkFBYSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvY3VzdG9tZXIvY3VzdG9tZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJ0bjEge1xyXG5cdGhlaWdodDogMTAwcHg7XHJcblx0LS1iYWNrZ3JvdW5kOiAjMzNGRkNDIDsgXHJcblx0XHJcbn1cclxuLmJ0bjIge1xyXG5cdGhlaWdodDogMTAwcHg7XHJcblx0LS1iYWNrZ3JvdW5kOiAjNjZDQ0ZGIDsgXHJcblxyXG59XHJcbi5pbWdfc3RvcmV7XHJcblx0d2lkdGg6IDgwcHg7IGhlaWdodDogODBweDtcclxufVxyXG4uYmsge1xyXG5cdHdpZHRoOjEwMHB4O1xyXG5cdGhlaWdodDogNjBweDtcclxuXHRwb3NpdGlvbjogYWJzb2x1dGU7XHJcblx0dG9wOiA2NSU7XHJcblx0bGVmdDo2NSU7XHJcblx0bWFyZ2luLXRvcDogLTEwMHB4O1xyXG5cdG1hcmdpbi1sZWZ0OiAtMTAwcHg7XHJcblx0Ly8gYm94LXNoYWRvdzogNXB4IDVweCAxMHB4IDEwcHggcmdiYSg1MCw1MCw1MCwuNCk7XHJcblx0fVxyXG4uYmcge1xyXG5cdFx0LS1iYWNrZ3JvdW5kOiB1cmwoJ2h0dHBzOi8vaW1hZ2UuZnJlZXBpay5jb20vZnJlZS12ZWN0b3IvY2l0eS1iYWNrZ3JvdW5kLWRlc2lnbl8xMzAwLTM4MC5qcGcnKTtcclxuXHQgIC8vIC0tYmFja2dyb3VuZCA6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzMzQ0NGRiA1MCUsICNDQ0ZGRkYgNTAlKTsgXHJcbiAgIFxyXG4gICB9ICJdfQ== */\"","import { Component,ViewChild ,AfterViewInit,ElementRef,NgZone } from '@angular/core';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { UserService } from './shared/user.service';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { ToastService } from '../shared/services/toast.service';\nimport { LoadingService } from '../shared/services/loading.service';\nimport { ActivatedRoute, Router,NavigationExtras  } from '@angular/router';\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\nimport { NavController } from '@ionic/angular';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\n\nimport { ModalController } from '@ionic/angular';\nimport { CartmodalComponent } from './cartmodal/cartmodal.component';\nimport { CustomerService } from './shared/customer.service';\n\ndeclare var google;\n\n@Component({\n  selector: 'app-customer',\n  templateUrl: './customer.page.html',\n  styleUrls: ['./customer.page.scss'],\n})\nexport class CustomerPage implements AfterViewInit{\n\n  tab1 = false;\n  tab2 = true;\n  latitude: any;\n  longitude: any;\n  member:any;\n  stores:any[] = [];\n  offset:number = 0;\n  q = '';\n  member_cart:any[] = [];\n  total_price = 0;\n  notes:string = '';\n\n  @ViewChild('mapElement',{static:false}) mapElement: ElementRef;\n  map: any;\n\n  constructor(\n    private geolocation: Geolocation,\n    private userservice:UserService,\n    private toastService:ToastService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private http: HttpClient,\n    private builder: FormBuilder,\n    private navCtrl: NavController,\n    private modalController: ModalController,\n    private loading: LoadingService,\n    private callNumber: CallNumber\n\t){\n\n    this.member = JSON.parse(localStorage.getItem('member'));\n    this.latitude = this.member.latitude;\n    this.longitude = this.member.longitude;\n\n    console.log(\"list component called!!!\");\n    console.log(this.member);\n\n    this.loadStores();\n  }\n\n  ionViewWillEnter() {\n\n  }\n  ngAfterViewInit(): void {\n    //this.getCurrentPos();\n\n  }\n\n  getCurrentPos(){\n\n    this.geolocation.getCurrentPosition().then((resp) => {\n        this.latitude = resp.coords.latitude;\n        this.longitude = resp.coords.longitude;\n        this.loadStores();\n    }).catch((error) => {\n      alert(\"รับตำแหน่งปัจจุบันไม่ได้ ใช้ตำแหน่งล่าสุด\");\n      this.loadStores();\n    });\n\n  }\n\n\n  loadStores(){\n      //this.loading.showLoading();\n      this.offset = this.stores.length;\n      this.userservice.getStores(this.offset, this.latitude, this.longitude).subscribe((data:any)=>{\n        //this.loading.dismissLoading();\n\n        data.forEach(e => {\n          this.stores.push(e)\n        });\n        console.log(this.stores);\n\n      });\n  }\n  searchStores(q){\n\n    if(q==\"\"){\n      this.loadStores();\n      this.q = q;\n    }\n\n    if(this.q == q){\n\n    }else{\n      this.stores = [];\n    }\n\n    this.q = q;\n\n    this.offset = this.stores.length;\n    this.userservice.searchStores(q, this.offset, this.latitude, this.longitude).subscribe((data:any)=>{\n      console.log(data);\n      this.stores = data;\n    });\n  }\n  infinitStores(e){\n    console.log(\"Infinit => \"+this.q);\n    if(this.q == \"\"){\n      console.log(\"Load Stores....\");\n      this.loadStores();\n    }else{\n      this.searchStores(this.q);\n    }\n  }\n  calcTotalPrice(){\n    this.total_price = 0;\n    this.member_cart.forEach(e => {\n        this.total_price += e.delivery_price;\n        e.products.forEach(p => {\n          this.total_price += p.price;\n        });\n    });\n\n  }\n\n  processPayment(){\n    this.tab1 = true;\n    this.tab2 = false;\n\n    this.member_cart = JSON.parse(localStorage.getItem('member_cart'));\n    console.log(this.member_cart);\n    this.calcTotalPrice();\n\n    if(this.mapElement){\n      console.log(\"Element active\");\n      this.loadMap();\n    }else{\n      console.log(\"Element not active\");\n    }\n  }\n\n  loadMap() {\n\n\n    localStorage.setItem(\"member_lat\",this.latitude);\n    localStorage.setItem(\"member_lng\",this.longitude);\n\n    let latLng = new google.maps.LatLng(this.latitude, this.longitude);\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\n      zoom: 12,\n      center: latLng,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    });\n    let marker = new google.maps.Marker({\n      map: this.map,\n      draggable: true,\n      animation: google.maps.Animation.DROP,\n      position: latLng\n    });\n    marker.addListener('dragend', function() {\n      localStorage.setItem(\"member_lat\",marker.getPosition().lat());\n      localStorage.setItem(\"member_lng\",marker.getPosition().lng());\n      this.map.setCenter(marker.getPosition());\n    });\n\n  }\n\n  placeOrder(){\n\n    this.member_cart = JSON.parse(localStorage.getItem('member_cart'));\n    this.latitude = localStorage.getItem('member_lat');\n    this.longitude = localStorage.getItem('member_lng');\n\n\n    console.log(this.member);\n\n    this.userservice.placeOrder(this.member, this.member_cart, this.notes, this.latitude, this.longitude).subscribe((data:any)=>{\n        console.log(\"res =====> \");\n        console.log(data);\n\n\n        localStorage.setItem('member',JSON.stringify( data.member ));\n        localStorage.setItem('member_cart',JSON.stringify( [] ));\n\n        this.member_cart = [];\n        this.total_price = 0;\n\n        this.toastService.showToast('ส่งคำสั่งซื้อเรียบร้อยแล้ว', 'top');\n        this.changeTab(0);\n\n    });\n\n  }\n\n  removeItem(store_id, product_id){\n    let i = 0;\n    this.member_cart.forEach(e => {\n      if(e.id == store_id){\n        let j = 0;\n        e.products.forEach(p => {\n            if(p.id == product_id){\n              e.products.splice(j,1);\n              console.log(store_id+\" => \"+e.products.length);\n              if(e.products.length <= 0){\n                this.member_cart.splice(i,1);\n              }\n            }\n            j++;\n        });\n      }\n      i++;\n    });\n    this.calcTotalPrice();\n    localStorage.setItem('member_cart',JSON.stringify(this.member_cart));\n  }\n\n  callStore(mobile_number){\n    this.callNumber.callNumber(`${mobile_number}`, true)\n      .then(res => {  })\n      .catch(err => { alert(JSON.stringify(err)); });\n  }\n\n  viewStore(store){\n    //console.log(store);\n    this.cartModal(store);\n  }\n\n  async cartModal(store) {\n\n    const modal = await this.modalController.create({\n      component: CartmodalComponent,\n      componentProps: {\n        'store': store\n      }\n    });\n    modal.onDidDismiss()\n      .then(status => {\n        console.log(\"dismis => \");\n        console.log(status);\n\n        if(status.data == 3){\n          this.processPayment();\n        }\n\n      });\n    return await modal.present();\n\n  }\n\n  changeTab(t){\n\n    if(t == 0){\n      this.tab1 = false;\n      this.tab2 = true;\n      this.stores = [];\n      this.loadStores();\n    }else{\n      this.tab1 = true;\n      this.tab2 = false;\n      this.processPayment();\n    }\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(\n    private http: HttpClient\n\t){\n\n  }\n\n  placeOrder(mem, member_cart, notes, latitude, longitude){\n\n    console.log(mem);\n    // console.log(member_cart);\n    // console.log(notes);\n    // console.log(latitude);\n    // console.log(longitude);\n\n    let items = [];\n    member_cart.forEach(e => {\n      e.products.forEach(p => {\n        items.push({\n          store_id:e.id,\n          product_id:p.id,\n          price:p.price,\n          qty:1\n        });\n      });\n    });\n\n    const body = {\n      member:mem,\n      latitude:latitude,\n      longitude:longitude,\n      notes:notes,\n      items:items\n    }\n\n    return this.http.post<any>(`https://qrdee.co/api/v2/orders`,body);\n\n  }\n\n  searchStores(q,offset,latitude,longitude){\n    console.log(`https://qrdee.co/api/v2/stores?q=${q}&offset=${offset}&latitude=${latitude}&longitude=${longitude}`);\n    return this.http.get<any>(`https://qrdee.co/api/v2/stores?q=${q}&offset=${offset}&latitude=${latitude}&longitude=${longitude}`);\n  }\n  getStores(offset,latitude,longitude) {\n    console.log(`https://qrdee.co/api/v2/stores?offset=${offset}&latitude=${latitude}&longitude=${longitude}`);\n    return this.http.get<any>(`https://qrdee.co/api/v2/stores?offset=${offset}&latitude=${latitude}&longitude=${longitude}`);\n  }\n\n\n//\n// updateUser(data,id) {\n//     return this.http.post<any>(`https://qrdee.co/api/v1/update_user/${id}`, this.createFormData(data));\n//   }\n//\n//\n// createFormData(data): FormData {\n//     const fd = new FormData();\n//     fd.append('latitude', data.latitude);\n//     fd.append('longitude', data.longitude);\n//     return fd;\n//   }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { LoadingController } from '@ionic/angular';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoadingService {\n\n\n  loading:any;\n\n  constructor(public loadingCtrl: LoadingController) { }\n\n  async showLoading(message=\"รอสักครู่\"){\n\n\n    this.loading = await this.loadingCtrl.create({\n      message: message\n    });\n    await this.loading.present();\n\n  }\n\n  dismissLoading(){\n    this.loading.dismiss();\n  }\n}\n"],"sourceRoot":""}